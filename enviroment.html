<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<title>手机版示例</title>
	<style>
		body {
				font-family: Monospace;
				background-color: #fff;
				color: #fff;
				margin: 0px;
				overflow: hidden;
			}
	</style>
</head>
<script src="zepto.js"></script>
<script src="tween.min.js"></script>
<!--three.js库文件-->
<script src="three.min.js"></script>
<!--用于加载mtl格式的材质库文件-->
<script src="loaders/MTLLoader.js"></script>
<!--用于加载obj格式的模型网格文件-->
<script src="loaders/OBJLoader.js"></script>
<body>

</body>
<script>
	var container;

	var camera, scene, raycaster, renderer;

	var windowHalfX = window.innerWidth / 2;
	var windowHalfY = window.innerHeight / 2;
	var human;

	init();
	animate();

	function init() {

		container = document.createElement( 'div' );
		document.body.appendChild( container );

		camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
		camera.position.z = 10;
		// scene

		scene = new THREE.Scene();
		raycaster = new THREE.Raycaster();

		// var ambient = new THREE.AmbientLight( 0x000000 );
		// scene.add( ambient );

		var directionalLight = new THREE.DirectionalLight( 0xffffff );
		directionalLight.position.set( 0, 0, -100 ).normalize();
		scene.add( directionalLight );

		var directionalLight2 = new THREE.DirectionalLight( 0xffffff );
		directionalLight2.position.set( 0, 0, 100 ).normalize();
		scene.add( directionalLight2 );
		// model

		var onProgress = function ( xhr ) {
			if ( xhr.lengthComputable ) {
				var percentComplete = xhr.loaded / xhr.total * 100;
				console.log( Math.round(percentComplete, 2) + '% downloaded' );
			}
		};

		var onError = function ( xhr ) { 
			alert('模型加载失败，请刷新页面重新加载');
		};
		var mtlLoader = new THREE.MTLLoader();
		mtlLoader.setPath('gameobj/');
		mtlLoader.load( 'mx.mtl', function( materials ) {
			materials.preload();
			var objLoader = new THREE.OBJLoader();
			objLoader.setMaterials( materials );
			objLoader.setPath( 'gameobj/' );
			objLoader.load( 'mx.obj', function ( object ) {
				human = object;
				scene.add( object );
			}, onProgress, onError );
		});
		renderer = new THREE.WebGLRenderer({
			antialias:true
		});
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );
		container.appendChild( renderer.domElement );
		renderer.setClearColor(0xFFFFFF, 0.5);
		window.addEventListener( 'resize', onWindowResize, false );
	}

	function onWindowResize() {

		windowHalfX = window.innerWidth / 2;
		windowHalfY = window.innerHeight / 2;

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();

		renderer.setSize( window.innerWidth, window.innerHeight );

	}

	function animate(time) {
		requestAnimationFrame( animate );
		render();
	}

	function render() {
		if(human){
			//human.position.z +=.01;
			human.rotation.y += .01;
		}
		renderer.render( scene, camera );
	}
</script>
</html>